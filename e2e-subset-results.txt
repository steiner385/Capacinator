Running E2E test subset...

> capacinator@1.0.0 test:e2e
> playwright test tests/e2e/suites/smoke/smoke-tests.spec.ts tests/e2e/suites/api/assignment-contracts.spec.ts tests/e2e/20-read-operations.spec.ts tests/e2e/21-write-operations.spec.ts --workers=1 --timeout=180000

ğŸš€ Starting E2E global setup...
ğŸ—„ï¸ Initializing E2E database...
ğŸ§ª Initializing E2E test database...
ğŸ”§ Running E2E database migrations...
Creating baseline database schema...
âœ… Baseline database schema created successfully
Fixing primary role foreign key constraint...
âœ… Fixed primary role foreign key constraint
Creating missing database views...
âœ… Created missing database views
Adding person_utilization_view and project_demands_view...
âœ… Added person_utilization_view and project_demands_view
Fixing project_demands_view with correct join conditions...
âœ… Fixed project_demands_view with correct join conditions
Fixing database views...
âœ… Fixed database views
Adding project_health_view for gaps analysis...
âœ… Added project_health_view for gaps analysis
Fixing project_health_view with correct health_status column...
âœ… Fixed project_health_view with correct health_status column
Improving project_demands_view with hour calculations...
âœ… Improved project_demands_view with hour calculations and project type info
Fixing project_demands_view missing columns...
âœ… Fixed project_demands_view with missing phase_id and renamed estimated_hours to demand_hours
Creating project_phase_dependencies table...
âœ… Created project_phase_dependencies table with constraints and indexes
ğŸ”§ Fixing missing IDs in database records...
Found 0 assignments without IDs
Found 0 availability overrides without IDs
âœ… Fixed missing IDs
ğŸŒ± Seeding E2E test data...
ğŸŒ± Seeding E2E test data...
âœ… E2E test data seeded successfully
âœ… E2E database initialized successfully
ğŸš€ Starting development server for E2E tests...
ğŸš€ Starting server...
âœ… Server started successfully
ğŸš€ Starting client...
âœ… Client started successfully
â³ Waiting for server at http://localhost:3120...
âœ… Server is ready
â³ Waiting for application to be ready...
âœ… Application is ready
ğŸ” Verifying test data...
âœ… API health check passed
âœ… /api/roles: 3 items
ğŸ” Handling initial profile selection...
ğŸ“‹ Profile selection modal detected
ğŸ¯ Starting profile selection...
ğŸ“‚ Opening profile dropdown...
âš ï¸ Profile selection handling failed: locator.waitFor: Timeout 5000ms exceeded.
Call log:
[2m  - waiting for locator('[role="option"], [data-radix-collection-item]').first() to be visible[22m

    at selectProfile (/home/tony/GitHub/Capacinator/tests/e2e/helpers/e2e-global-setup.ts:360:32)
    at handleInitialProfileSelection (/home/tony/GitHub/Capacinator/tests/e2e/helpers/e2e-global-setup.ts:329:7)
    at globalSetup (/home/tony/GitHub/Capacinator/tests/e2e/helpers/e2e-global-setup.ts:67:5) {
  name: 'TimeoutError'
}
ğŸ’¾ Authentication state saved to /home/tony/GitHub/Capacinator/test-results/e2e-auth.json
âœ… E2E global setup completed successfully

Running 56 tests using 1 worker

  âœ“   1 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:12:3 â€º Smoke Tests â€º @smoke @critical server health check (143ms)
âœ… Loaded saved authentication state
ğŸ” Checking for profile selection modal...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
âš ï¸ Shadcn Select failed: page.waitForSelector: Timeout 5000ms exceeded.
Call log:
[2m  - waiting for locator('[role="option"], [data-radix-collection-item]') to be visible[22m

âŒ Profile selection failed: Failed to select profile from dropdown
ğŸ”„ Attempting to continue anyway...
ğŸ“¸ Error screenshot saved to /tmp/profile-modal-error.png
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
  âœ“   2 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:20:3 â€º Smoke Tests â€º @smoke @critical can authenticate and reach dashboard (11.5s)
âœ… Loaded saved authentication state
ğŸ” Checking for profile selection modal...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
âš ï¸ Shadcn Select failed: page.waitForSelector: Timeout 5000ms exceeded.
Call log:
[2m  - waiting for locator('[role="option"], [data-radix-collection-item]') to be visible[22m

âŒ Profile selection failed: Failed to select profile from dropdown
ğŸ”„ Attempting to continue anyway...
ğŸ“¸ Error screenshot saved to /tmp/profile-modal-error.png
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
  âœ“   3 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:28:3 â€º Smoke Tests â€º @smoke main navigation links work (11.3s)
âœ… Loaded saved authentication state
ğŸ” Checking for profile selection modal...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
âš ï¸ Shadcn Select failed: page.waitForSelector: Timeout 5000ms exceeded.
Call log:
[2m  - waiting for locator('[role="option"], [data-radix-collection-item]') to be visible[22m

âŒ Profile selection failed: Failed to select profile from dropdown
ğŸ”„ Attempting to continue anyway...
ğŸ“¸ Error screenshot saved to /tmp/profile-modal-error.png
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .report-tabs, button.tab
  âœ“   4 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:38:3 â€º Smoke Tests â€º @smoke projects page loads with table (12.4s)
âœ… Loaded saved authentication state
ğŸ” Checking for profile selection modal...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
âš ï¸ Shadcn Select failed: page.waitForSelector: Timeout 5000ms exceeded.
Call log:
[2m  - waiting for locator('[role="option"], [data-radix-collection-item]') to be visible[22m

âŒ Profile selection failed: Failed to select profile from dropdown
ğŸ”„ Attempting to continue anyway...
ğŸ“¸ Error screenshot saved to /tmp/profile-modal-error.png
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .report-tabs, button.tab
  âœ“   5 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:53:3 â€º Smoke Tests â€º @smoke people page loads with data (12.4s)
âœ… Loaded saved authentication state
ğŸ” Checking for profile selection modal...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
âš ï¸ Shadcn Select failed: page.waitForSelector: Timeout 5000ms exceeded.
Call log:
[2m  - waiting for locator('[role="option"], [data-radix-collection-item]') to be visible[22m

âŒ Profile selection failed: Failed to select profile from dropdown
ğŸ”„ Attempting to continue anyway...
ğŸ“¸ Error screenshot saved to /tmp/profile-modal-error.png
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Waiting for page content to load...
âœ… Layout container found
âš ï¸ Sidebar not found
âœ… Navigation links found
âœ… Main content area found
âš ï¸ No specific content found within timeout, but page is still open
  âœ˜   6 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:67:3 â€º Smoke Tests â€º @smoke assignments page is accessible (36.2s)
âœ… Loaded saved authentication state
ğŸ” Checking for profile selection modal...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
âš ï¸ Shadcn Select failed: page.waitForSelector: Timeout 5000ms exceeded.
Call log:
[2m  - waiting for locator('[role="option"], [data-radix-collection-item]') to be visible[22m

âŒ Profile selection failed: Failed to select profile from dropdown
ğŸ”„ Attempting to continue anyway...
ğŸ“¸ Error screenshot saved to /tmp/profile-modal-error.png
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âš ï¸ Navigation links not found
âš ï¸ Main content area not found
âš ï¸ No specific content found within timeout, but page is still open
  âœ˜   7 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:67:3 â€º Smoke Tests â€º @smoke assignments page is accessible (retry #1) (41.4s)
âœ… Loaded saved authentication state
ğŸ” Checking for profile selection modal...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
âš ï¸ Shadcn Select failed: page.waitForSelector: Timeout 5000ms exceeded.
Call log:
[2m  - waiting for locator('[role="option"], [data-radix-collection-item]') to be visible[22m

âŒ Profile selection failed: Failed to select profile from dropdown
ğŸ”„ Attempting to continue anyway...
ğŸ“¸ Error screenshot saved to /tmp/profile-modal-error.png
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .report-tabs, button.tab
  âœ“   8 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:80:3 â€º Smoke Tests â€º @smoke reports page shows tabs (12.2s)
âœ… Loaded saved authentication state
ğŸ” Checking for profile selection modal...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
âš ï¸ Shadcn Select failed: page.waitForSelector: Timeout 5000ms exceeded.
Call log:
[2m  - waiting for locator('[role="option"], [data-radix-collection-item]') to be visible[22m

âŒ Profile selection failed: Failed to select profile from dropdown
ğŸ”„ Attempting to continue anyway...
ğŸ“¸ Error screenshot saved to /tmp/profile-modal-error.png
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .report-tabs, button.tab
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .report-tabs, button.tab
Waiting for page content to load...
âœ… Layout container found
âš ï¸ Sidebar not found
âš ï¸ Navigation links not found
âœ… Main content area found
âš ï¸ No specific content found within timeout, but page is still open
  âœ“   9 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:90:3 â€º Smoke Tests â€º @smoke no console errors on main pages (36.6s)
  âœ“  10 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:112:3 â€º Smoke Tests â€º @smoke API endpoints respond (36ms)
âœ… Loaded saved authentication state
ğŸ” Checking for profile selection modal...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
âš ï¸ Shadcn Select failed: page.waitForSelector: Timeout 5000ms exceeded.
Call log:
[2m  - waiting for locator('[role="option"], [data-radix-collection-item]') to be visible[22m

âŒ Profile selection failed: Failed to select profile from dropdown
ğŸ”„ Attempting to continue anyway...
ğŸ“¸ Error screenshot saved to /tmp/profile-modal-error.png
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .report-tabs, button.tab
  âœ“  11 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:140:3 â€º Smoke Tests â€º @smoke search functionality exists (13.3s)
ğŸ” Checking for profile selection modal...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
âš ï¸ Shadcn Select failed: page.waitForSelector: Timeout 5000ms exceeded.
Call log:
[2m  - waiting for locator('[role="option"], [data-radix-collection-item]') to be visible[22m

âŒ Profile selection failed: Failed to select profile from dropdown
ğŸ”„ Attempting to continue anyway...
ğŸ“¸ Error screenshot saved to /tmp/profile-modal-error.png
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Click failed with nav a:has-text("Dashboard"), trying force click...
  âœ˜  12 [chromium] â€º tests/e2e/20-read-operations.spec.ts:14:5 â€º Read Operations - All Pages â€º Dashboard Page â€º should display all dashboard metrics (22.0s)
ğŸ” Checking for profile selection modal...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
âš ï¸ Shadcn Select failed: page.waitForSelector: Timeout 5000ms exceeded.
Call log:
[2m  - waiting for locator('[role="option"], [data-radix-collection-item]') to be visible[22m

âŒ Profile selection failed: Failed to select profile from dropdown
ğŸ”„ Attempting to continue anyway...
ğŸ“¸ Error screenshot saved to /tmp/profile-modal-error.png
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Click failed with nav a:has-text("Dashboard"), trying force click...
  âœ˜  13 [chromium] â€º tests/e2e/20-read-operations.spec.ts:14:5 â€º Read Operations - All Pages â€º Dashboard Page â€º should display all dashboard metrics (retry #1) (22.5s)
ğŸ” Checking for profile selection modal...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
âš ï¸ Shadcn Select failed: page.waitForSelector: Timeout 5000ms exceeded.
Call log:
[2m  - waiting for locator('[role="option"], [data-radix-collection-item]') to be visible[22m

âŒ Profile selection failed: Failed to select profile from dropdown
ğŸ”„ Attempting to continue anyway...
ğŸ“¸ Error screenshot saved to /tmp/profile-modal-error.png
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Click failed with nav a:has-text("Dashboard"), trying force click...
  âœ˜  14 [chromium] â€º tests/e2e/20-read-operations.spec.ts:33:5 â€º Read Operations - All Pages â€º Dashboard Page â€º should have working links to detail pages (53.5s)
