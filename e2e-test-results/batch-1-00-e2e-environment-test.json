
> capacinator@1.0.0 test:e2e
> playwright test tests/e2e/00-e2e-environment-test.spec.ts --reporter=json

ğŸš€ Starting E2E global setup...
ğŸ—„ï¸ E2E database will be initialized by server...
ğŸš€ Starting E2E server...
ğŸš€ Starting server...
âœ… Server started successfully
ğŸš€ Starting client...
âœ… Client started successfully
â³ Waiting for server at http://localhost:3120...
âœ… Server is ready
â³ Waiting for application to be ready...
âœ… Application is ready
ğŸ” Verifying test data...
âœ… API health check passed
âœ… /api/roles: 4 items
ğŸ” Handling initial profile selection...
ğŸ“‹ Profile selection modal detected
ğŸ¯ Starting profile selection...

ğŸ“ Attempt 1/3 to select profile...
Select trigger text: "Select your name..."
ğŸ“‚ Opening profile dropdown...
ğŸ” Trying strategy: Standard role="option"
âœ… Standard role="option": Found 4 options
DOM state: 0 portals, 1 popper wrappers
Available profiles: [
  'E2E Over Utilized (E2E Developer)',
  'E2E Normal Utilized (E2E Designer)',
  'E2E Under Utilized (E2E Manager)',
  'E2E Zero Utilized (E2E QA Engineer)'
]
Selecting profile: "E2E Over Utilized (E2E Developer)"
Select value after click: "Select your name..."
ğŸ”„ Retrying...

ğŸ“ Attempt 2/3 to select profile...
Select trigger text: "Select your name..."
ğŸ“‚ Opening profile dropdown...
ğŸ” Trying strategy: Standard role="option"
âœ… Standard role="option": Found 4 options
DOM state: 0 portals, 1 popper wrappers
ğŸ”„ Retrying...

ğŸ“ Attempt 3/3 to select profile...
Select trigger text: "Select your name..."
ğŸ“‚ Opening profile dropdown...
ğŸ” Trying strategy: Standard role="option"
âœ… Standard role="option": Found 4 options
DOM state: 0 portals, 1 popper wrappers
Available profiles: [
  'E2E Over Utilized (E2E Developer)',
  'E2E Normal Utilized (E2E Designer)',
  'E2E Under Utilized (E2E Manager)',
  'E2E Zero Utilized (E2E QA Engineer)'
]
Selecting profile: "E2E Over Utilized (E2E Developer)"
Select value after click: "Select your name..."
ğŸ”Œ All UI attempts failed, trying API fallback...
ğŸ”Œ Using API fallback for profile selection...
API fallback: Selecting E2E Over Utilized
âœ… Profile selected via API fallback
âœ… Profile selected and saved
ğŸ’¾ Current auth data: { hasCurrentUser: true, hasSelectedProfile: true }
ğŸ’¾ Authentication state saved to /home/tony/GitHub/Capacinator/test-results/e2e-auth.json
âœ… Saved state verification: Contains localStorage data
âœ… E2E global setup completed successfully
ğŸ§¹ Starting E2E global teardown...
ğŸ—‘ï¸ Cleaning up test data for run: e2e-1758481908870
âš ï¸ scenario assignments endpoint not available, skipping cleanup
ğŸ—„ï¸ E2E database will be cleaned up with server...
ğŸ›‘ Stopping development client...
âœ… Client stopped
ğŸ›‘ Stopping development server...
âœ… Server stopped
ğŸ—‘ï¸ Cleaning up authentication state...
âœ… E2E global teardown completed successfully
{
  "config": {
    "configFile": "/home/tony/GitHub/Capacinator/playwright.config.ts",
    "rootDir": "/home/tony/GitHub/Capacinator/tests/e2e",
    "forbidOnly": false,
    "fullyParallel": false,
    "globalSetup": "/home/tony/GitHub/Capacinator/tests/e2e/helpers/e2e-global-setup.ts",
    "globalTeardown": "/home/tony/GitHub/Capacinator/tests/e2e/helpers/global-teardown.ts",
    "globalTimeout": 0,
    "grep": {},
    "grepInvert": null,
    "maxFailures": 0,
    "metadata": {
      "actualWorkers": 1
    },
    "preserveOutput": "always",
    "reporter": [
      [
        "json"
      ]
    ],
    "reportSlowTests": {
      "max": 5,
      "threshold": 300000
    },
    "quiet": false,
    "projects": [
      {
        "outputDir": "/home/tony/GitHub/Capacinator/test-results",
        "repeatEach": 1,
        "retries": 1,
        "metadata": {
          "actualWorkers": 1
        },
        "id": "smoke",
        "name": "smoke",
        "testDir": "/home/tony/GitHub/Capacinator/tests/e2e",
        "testIgnore": [
          "**/archived/**/*.spec.ts"
        ],
        "testMatch": [
          "/.*smoke.*\\.spec\\.ts$/"
        ],
        "timeout": 60000
      },
      {
        "outputDir": "/home/tony/GitHub/Capacinator/test-results",
        "repeatEach": 1,
        "retries": 1,
        "metadata": {
          "actualWorkers": 1
        },
        "id": "chromium",
        "name": "chromium",
        "testDir": "/home/tony/GitHub/Capacinator/tests/e2e",
        "testIgnore": [
          "/.*smoke.*\\.spec\\.ts$/",
          "/.*slow.*\\.spec\\.ts$/"
        ],
        "testMatch": [
          "**/*.@(spec|test).?(c|m)[jt]s?(x)"
        ],
        "timeout": 60000
      },
      {
        "outputDir": "/home/tony/GitHub/Capacinator/test-results",
        "repeatEach": 1,
        "retries": 1,
        "metadata": {
          "actualWorkers": 1
        },
        "id": "firefox",
        "name": "firefox",
        "testDir": "/home/tony/GitHub/Capacinator/tests/e2e",
        "testIgnore": [
          "**/archived/**/*.spec.ts"
        ],
        "testMatch": [
          "/.*@cross-browser.*\\.spec\\.ts$/"
        ],
        "timeout": 60000
      },
      {
        "outputDir": "/home/tony/GitHub/Capacinator/test-results",
        "repeatEach": 1,
        "retries": 1,
        "metadata": {
          "actualWorkers": 1
        },
        "id": "mobile",
        "name": "mobile",
        "testDir": "/home/tony/GitHub/Capacinator/tests/e2e",
        "testIgnore": [
          "**/archived/**/*.spec.ts"
        ],
        "testMatch": [
          "/.*mobile.*\\.spec\\.ts$/"
        ],
        "timeout": 60000
      },
      {
        "outputDir": "/home/tony/GitHub/Capacinator/test-results",
        "repeatEach": 1,
        "retries": 1,
        "metadata": {
          "actualWorkers": 1
        },
        "id": "api",
        "name": "api",
        "testDir": "/home/tony/GitHub/Capacinator/tests/e2e",
        "testIgnore": [
          "**/archived/**/*.spec.ts"
        ],
        "testMatch": [
          "/.*api.*\\.spec\\.ts$/"
        ],
        "timeout": 60000
      },
      {
        "outputDir": "/home/tony/GitHub/Capacinator/test-results",
        "repeatEach": 1,
        "retries": 1,
        "metadata": {
          "actualWorkers": 1
        },
        "id": "scenarios",
        "name": "scenarios",
        "testDir": "/home/tony/GitHub/Capacinator/tests/e2e",
        "testIgnore": [
          "**/archived/**/*.spec.ts"
        ],
        "testMatch": [
          "/.*scenario.*\\.spec\\.ts$/"
        ],
        "timeout": 120000
      }
    ],
    "shard": null,
    "updateSnapshots": "missing",
    "updateSourceMethod": "patch",
    "version": "1.55.0",
    "workers": 4,
    "webServer": null
  },
  "suites": [
    {
      "title": "00-e2e-environment-test.spec.ts",
      "file": "00-e2e-environment-test.spec.ts",
      "column": 0,
      "line": 0,
      "specs": [],
      "suites": [
        {
          "title": "E2E Environment Verification",
          "file": "00-e2e-environment-test.spec.ts",
          "line": 2,
          "column": 6,
          "specs": [
            {
              "title": "should have isolated e2e environment running",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 60000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "chromium",
                  "projectName": "chromium",
                  "results": [
                    {
                      "workerIndex": 0,
                      "parallelIndex": 0,
                      "status": "passed",
                      "duration": 5862,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "âœ… Loaded saved authentication state\n"
                        },
                        {
                          "text": "ğŸ” Checking for profile selection modal...\n"
                        },
                        {
                          "text": "âœ… No profile modal detected, continuing...\n"
                        },
                        {
                          "text": "Waiting for page content to load...\n"
                        },
                        {
                          "text": "âœ… Layout container found\n"
                        },
                        {
                          "text": "âœ… Sidebar found\n"
                        },
                        {
                          "text": "âœ… Navigation links found\n"
                        },
                        {
                          "text": "âœ… Main content area found\n"
                        },
                        {
                          "text": "âœ… Found content: .chart-container\n"
                        },
                        {
                          "text": "ğŸ” Checking for profile selection modal...\n"
                        },
                        {
                          "text": "âœ… No profile modal detected, continuing...\n"
                        },
                        {
                          "text": "Waiting for page content to load...\n"
                        },
                        {
                          "text": "âœ… Layout container found\n"
                        },
                        {
                          "text": "âœ… Sidebar found\n"
                        },
                        {
                          "text": "âœ… Navigation links found\n"
                        },
                        {
                          "text": "âœ… Main content area found\n"
                        },
                        {
                          "text": "âœ… Found content: .chart-container\n"
                        },
                        {
                          "text": "âš ï¸ Running against dev environment instead of isolated E2E\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-09-21T19:13:07.684Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "3d74d97e8931d2bc0ca2-28d8721ef7ad25a17358",
              "file": "00-e2e-environment-test.spec.ts",
              "line": 3,
              "column": 3
            },
            {
              "title": "should have e2e database isolation",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 60000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "chromium",
                  "projectName": "chromium",
                  "results": [
                    {
                      "workerIndex": 0,
                      "parallelIndex": 0,
                      "status": "passed",
                      "duration": 5702,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "âœ… Loaded saved authentication state\n"
                        },
                        {
                          "text": "ğŸ” Checking for profile selection modal...\n"
                        },
                        {
                          "text": "âœ… No profile modal detected, continuing...\n"
                        },
                        {
                          "text": "Waiting for page content to load...\n"
                        },
                        {
                          "text": "âœ… Layout container found\n"
                        },
                        {
                          "text": "âœ… Sidebar found\n"
                        },
                        {
                          "text": "âœ… Navigation links found\n"
                        },
                        {
                          "text": "âœ… Main content area found\n"
                        },
                        {
                          "text": "âœ… Found content: .chart-container\n"
                        },
                        {
                          "text": "ğŸ” Checking for profile selection modal...\n"
                        },
                        {
                          "text": "âœ… No profile modal detected, continuing...\n"
                        },
                        {
                          "text": "Waiting for page content to load...\n"
                        },
                        {
                          "text": "âœ… Layout container found\n"
                        },
                        {
                          "text": "âœ… Sidebar found\n"
                        },
                        {
                          "text": "âœ… Navigation links found\n"
                        },
                        {
                          "text": "âœ… Main content area found\n"
                        },
                        {
                          "text": "âœ… Found content: .chart-container\n"
                        },
                        {
                          "text": "âš ï¸ Running against dev environment - database isolation check skipped\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-09-21T19:13:13.610Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "3d74d97e8931d2bc0ca2-6110220eb95ba9b2b14c",
              "file": "00-e2e-environment-test.spec.ts",
              "line": 29,
              "column": 3
            },
            {
              "title": "should have e2e scenarios available",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 60000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "chromium",
                  "projectName": "chromium",
                  "results": [
                    {
                      "workerIndex": 0,
                      "parallelIndex": 0,
                      "status": "passed",
                      "duration": 6,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "âœ… E2E scenarios available: 1 total, 1 baseline\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-09-21T19:13:19.319Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "3d74d97e8931d2bc0ca2-63e172423234cd8bf944",
              "file": "00-e2e-environment-test.spec.ts",
              "line": 49,
              "column": 3
            },
            {
              "title": "should not interfere with dev environment",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 60000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "chromium",
                  "projectName": "chromium",
                  "results": [
                    {
                      "workerIndex": 0,
                      "parallelIndex": 0,
                      "status": "passed",
                      "duration": 5671,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "âœ… Loaded saved authentication state\n"
                        },
                        {
                          "text": "ğŸ” Checking for profile selection modal...\n"
                        },
                        {
                          "text": "âœ… No profile modal detected, continuing...\n"
                        },
                        {
                          "text": "Waiting for page content to load...\n"
                        },
                        {
                          "text": "âœ… Layout container found\n"
                        },
                        {
                          "text": "âœ… Sidebar found\n"
                        },
                        {
                          "text": "âœ… Navigation links found\n"
                        },
                        {
                          "text": "âœ… Main content area found\n"
                        },
                        {
                          "text": "âœ… Found content: .chart-container\n"
                        },
                        {
                          "text": "ğŸ” Checking for profile selection modal...\n"
                        },
                        {
                          "text": "âœ… No profile modal detected, continuing...\n"
                        },
                        {
                          "text": "Waiting for page content to load...\n"
                        },
                        {
                          "text": "âœ… Layout container found\n"
                        },
                        {
                          "text": "âœ… Sidebar found\n"
                        },
                        {
                          "text": "âœ… Navigation links found\n"
                        },
                        {
                          "text": "âœ… Main content area found\n"
                        },
                        {
                          "text": "âœ… Found content: .chart-container\n"
                        },
                        {
                          "text": "âœ… Running safely on: localhost\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-09-21T19:13:19.330Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "3d74d97e8931d2bc0ca2-3ac819e80ccb49f1bde2",
              "file": "00-e2e-environment-test.spec.ts",
              "line": 68,
              "column": 3
            },
            {
              "title": "should have authentication working",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 60000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "chromium",
                  "projectName": "chromium",
                  "results": [
                    {
                      "workerIndex": 0,
                      "parallelIndex": 0,
                      "status": "passed",
                      "duration": 5791,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "âœ… Loaded saved authentication state\n"
                        },
                        {
                          "text": "ğŸ” Checking for profile selection modal...\n"
                        },
                        {
                          "text": "âœ… No profile modal detected, continuing...\n"
                        },
                        {
                          "text": "Waiting for page content to load...\n"
                        },
                        {
                          "text": "âœ… Layout container found\n"
                        },
                        {
                          "text": "âœ… Sidebar found\n"
                        },
                        {
                          "text": "âœ… Navigation links found\n"
                        },
                        {
                          "text": "âœ… Main content area found\n"
                        },
                        {
                          "text": "âœ… Found content: .chart-container\n"
                        },
                        {
                          "text": "ğŸ” Checking for profile selection modal...\n"
                        },
                        {
                          "text": "âœ… No profile modal detected, continuing...\n"
                        },
                        {
                          "text": "Waiting for page content to load...\n"
                        },
                        {
                          "text": "âœ… Layout container found\n"
                        },
                        {
                          "text": "âœ… Sidebar found\n"
                        },
                        {
                          "text": "âœ… Navigation links found\n"
                        },
                        {
                          "text": "âœ… Main content area found\n"
                        },
                        {
                          "text": "âœ… Found content: .chart-container\n"
                        },
                        {
                          "text": "Waiting for page content to load...\n"
                        },
                        {
                          "text": "âœ… Layout container found\n"
                        },
                        {
                          "text": "âœ… Sidebar found\n"
                        },
                        {
                          "text": "âœ… Navigation links found\n"
                        },
                        {
                          "text": "âœ… Main content area found\n"
                        },
                        {
                          "text": "âœ… Found content: .chart-container\n"
                        },
                        {
                          "text": "âœ… Authentication verified\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-09-21T19:13:25.006Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "3d74d97e8931d2bc0ca2-96ed49d83d4208da10e8",
              "file": "00-e2e-environment-test.spec.ts",
              "line": 78,
              "column": 3
            }
          ]
        }
      ]
    }
  ],
  "errors": [],
  "stats": {
    "startTime": "2025-09-21T19:11:48.863Z",
    "duration": 102122.53099999999,
    "expected": 5,
    "skipped": 0,
    "unexpected": 0,
    "flaky": 0
  }
}
