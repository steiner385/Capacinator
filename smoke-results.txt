🚀 Starting E2E global setup...
🗄️ Initializing E2E database...
🧪 Initializing E2E test database...
🔧 Running E2E database migrations...
Creating baseline database schema...
✅ Baseline database schema created successfully
Fixing primary role foreign key constraint...
✅ Fixed primary role foreign key constraint
Creating missing database views...
✅ Created missing database views
Adding person_utilization_view and project_demands_view...
✅ Added person_utilization_view and project_demands_view
Fixing project_demands_view with correct join conditions...
✅ Fixed project_demands_view with correct join conditions
Fixing database views...
✅ Fixed database views
Adding project_health_view for gaps analysis...
✅ Added project_health_view for gaps analysis
Fixing project_health_view with correct health_status column...
✅ Fixed project_health_view with correct health_status column
Improving project_demands_view with hour calculations...
✅ Improved project_demands_view with hour calculations and project type info
Fixing project_demands_view missing columns...
✅ Fixed project_demands_view with missing phase_id and renamed estimated_hours to demand_hours
Creating project_phase_dependencies table...
✅ Created project_phase_dependencies table with constraints and indexes
🔧 Fixing missing IDs in database records...
Found 0 assignments without IDs
Found 0 availability overrides without IDs
✅ Fixed missing IDs
🌱 Seeding E2E test data...
🌱 Seeding E2E test data...
✅ E2E test data seeded successfully
✅ E2E database initialized successfully
✅ Development server already running
⏳ Waiting for application to be ready...
✅ Application is ready
🔍 Verifying test data...
✅ API health check passed
✅ /api/roles: 13 items
⚠️ /api/profiles returned 404
🔍 Handling initial profile selection...
📋 Profile selection modal detected
🎯 Starting profile selection...
📂 Opening profile dropdown...
Found 14 profile options
Selecting profile: Alice Johnson (Project Manager)
⚠️ Profile selection handling failed: page.waitForFunction: Timeout 30000ms exceeded.
    at selectProfile (/home/tony/GitHub/Capacinator/tests/e2e/helpers/e2e-global-setup.ts:339:16)
    at handleInitialProfileSelection (/home/tony/GitHub/Capacinator/tests/e2e/helpers/e2e-global-setup.ts:288:7)
    at globalSetup (/home/tony/GitHub/Capacinator/tests/e2e/helpers/e2e-global-setup.ts:66:5) {
  name: 'TimeoutError'
}
💾 Authentication state saved to /home/tony/GitHub/Capacinator/test-results/e2e-auth.json
✅ E2E global setup completed successfully

Running 10 tests using 4 workers

  ✓   2 [smoke] › tests/e2e/suites/smoke/smoke-tests.spec.ts:12:3 › Smoke Tests › @smoke @critical server health check (175ms)
✅ Loaded saved authentication state
✅ Loaded saved authentication state
✅ Loaded saved authentication state
🔍 Checking for profile selection modal...
🔍 Checking for profile selection modal...
✅ Loaded saved authentication state
🔍 Checking for profile selection modal...
🔍 Checking for profile selection modal...
📋 Profile modal detected, proceeding with selection...
📋 Profile modal detected, proceeding with selection...
📝 Profile select component found
📝 Profile select component found
📋 Profile modal detected, proceeding with selection...
📝 Profile select component found
📋 Profile modal detected, proceeding with selection...
📝 Profile select component found
🎯 Attempting to select profile...
🎯 Attempting to select profile...
🎯 Attempting to select profile...
🎯 Attempting to select profile...
📂 Opened shadcn Select dropdown
📂 Opened shadcn Select dropdown
📂 Opened shadcn Select dropdown
📂 Opened shadcn Select dropdown
Selecting profile: Alice Johnson (Project Manager)
Selecting profile: Alice Johnson (Project Manager)
Selecting profile: Alice Johnson (Project Manager)
✅ Profile selected using shadcn Select
✅ Profile selected using shadcn Select
✅ Profile selected using shadcn Select
Selecting profile: Alice Johnson (Project Manager)
✅ Profile selected using shadcn Select
⏳ Waiting for Continue button to become enabled...
✅ Continue button is now enabled
👆 Clicking Continue button...
⏳ Waiting for Continue button to become enabled...
✅ Continue button is now enabled
👆 Clicking Continue button...
✅ Continue button clicked successfully
⏳ Waiting for profile modal to close...
⏳ Waiting for Continue button to become enabled...
✅ Profile modal successfully closed
⏳ Waiting for navigation to stabilize...
✅ Continue button is now enabled
👆 Clicking Continue button...
✅ Continue button clicked successfully
⏳ Waiting for profile modal to close...
✅ Profile modal successfully closed
⏳ Waiting for navigation to stabilize...
✅ Continue button clicked successfully
⏳ Waiting for profile modal to close...
✅ Profile modal successfully closed
⏳ Waiting for navigation to stabilize...
⏳ Waiting for Continue button to become enabled...
✅ Continue button is now enabled
👆 Clicking Continue button...
✅ Continue button clicked successfully
⏳ Waiting for profile modal to close...
✅ Profile modal successfully closed
⏳ Waiting for navigation to stabilize...
✅ Network activity settled
🎉 Profile selection process completed
✅ Network activity settled
🎉 Profile selection process completed
✅ Network activity settled
🎉 Profile selection process completed
✅ Network activity settled
🎉 Profile selection process completed
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
Waiting for page content to load...
✅ Main content area found
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
✅ Found content: .chart-container
✅ Found content: .chart-container
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
✅ Found content: .chart-container
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
✅ Found content: .chart-container
  ✓   1 [smoke] › tests/e2e/suites/smoke/smoke-tests.spec.ts:28:3 › Smoke Tests › @smoke main navigation links work (9.8s)
  ✓   3 [smoke] › tests/e2e/suites/smoke/smoke-tests.spec.ts:20:3 › Smoke Tests › @smoke @critical can authenticate and reach dashboard (9.9s)
✅ Loaded saved authentication state
✅ Loaded saved authentication state
🔍 Checking for profile selection modal...
🔍 Checking for profile selection modal...
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
✅ Found content: .report-tabs, button.tab
  ✓   4 [smoke] › tests/e2e/suites/smoke/smoke-tests.spec.ts:38:3 › Smoke Tests › @smoke projects page loads with table (10.5s)
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
✅ Found content: .report-tabs, button.tab
  ✓   5 [smoke] › tests/e2e/suites/smoke/smoke-tests.spec.ts:53:3 › Smoke Tests › @smoke people page loads with data (10.6s)
  ✓   9 [smoke] › tests/e2e/suites/smoke/smoke-tests.spec.ts:112:3 › Smoke Tests › @smoke API endpoints respond (40ms)
✅ Loaded saved authentication state
🔍 Checking for profile selection modal...
✅ Loaded saved authentication state
📋 Profile modal detected, proceeding with selection...
📝 Profile select component found
📋 Profile modal detected, proceeding with selection...
📝 Profile select component found
🔍 Checking for profile selection modal...
📋 Profile modal detected, proceeding with selection...
📝 Profile select component found
🎯 Attempting to select profile...
🎯 Attempting to select profile...
📋 Profile modal detected, proceeding with selection...
📝 Profile select component found
📂 Opened shadcn Select dropdown
📂 Opened shadcn Select dropdown
Selecting profile: Alice Johnson (Project Manager)
✅ Profile selected using shadcn Select
Selecting profile: Alice Johnson (Project Manager)
✅ Profile selected using shadcn Select
🎯 Attempting to select profile...
📂 Opened shadcn Select dropdown
🎯 Attempting to select profile...
📂 Opened shadcn Select dropdown
Selecting profile: Alice Johnson (Project Manager)
✅ Profile selected using shadcn Select
⏳ Waiting for Continue button to become enabled...
✅ Continue button is now enabled
👆 Clicking Continue button...
Selecting profile: Alice Johnson (Project Manager)
✅ Continue button clicked successfully
⏳ Waiting for profile modal to close...
✅ Profile modal successfully closed
⏳ Waiting for navigation to stabilize...
⏳ Waiting for Continue button to become enabled...
✅ Continue button is now enabled
👆 Clicking Continue button...
✅ Profile selected using shadcn Select
✅ Continue button clicked successfully
⏳ Waiting for profile modal to close...
✅ Profile modal successfully closed
⏳ Waiting for navigation to stabilize...
⏳ Waiting for Continue button to become enabled...
✅ Continue button is now enabled
👆 Clicking Continue button...
✅ Continue button clicked successfully
⏳ Waiting for profile modal to close...
✅ Profile modal successfully closed
⏳ Waiting for navigation to stabilize...
⏳ Waiting for Continue button to become enabled...
✅ Continue button is now enabled
👆 Clicking Continue button...
✅ Continue button clicked successfully
⏳ Waiting for profile modal to close...
✅ Profile modal successfully closed
⏳ Waiting for navigation to stabilize...
✅ Network activity settled
🎉 Profile selection process completed
✅ Network activity settled
🎉 Profile selection process completed
✅ Network activity settled
🎉 Profile selection process completed
✅ Network activity settled
🎉 Profile selection process completed
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
✅ Found content: .chart-container
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
✅ Found content: .chart-container
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
✅ Found content: text=No data available
  ✓   6 [smoke] › tests/e2e/suites/smoke/smoke-tests.spec.ts:67:3 › Smoke Tests › @smoke assignments page is accessible (10.1s)
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Found content: .report-tabs, button.tab
✅ Main content area found
✅ Found content: .chart-container
  ✓   7 [smoke] › tests/e2e/suites/smoke/smoke-tests.spec.ts:80:3 › Smoke Tests › @smoke reports page shows tabs (10.2s)
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
✅ Found content: .chart-container
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
✅ Found content: .chart-container
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
✅ Found content: .report-tabs, button.tab
  ✓  10 [smoke] › tests/e2e/suites/smoke/smoke-tests.spec.ts:140:3 › Smoke Tests › @smoke search functionality exists (11.2s)
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
✅ Found content: .report-tabs, button.tab
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
✅ Found content: .report-tabs, button.tab
Waiting for page content to load...
✅ Layout container found
✅ Sidebar found
✅ Navigation links found
✅ Main content area found
✅ Found content: text=No data available
  ✓   8 [smoke] › tests/e2e/suites/smoke/smoke-tests.spec.ts:90:3 › Smoke Tests › @smoke no console errors on main pages (16.3s)
🧹 Starting E2E global teardown...
🗑️ Cleaning up test data for run: e2e-1758218371806
⚠️ scenario assignments endpoint not available, skipping cleanup
🗄️ Cleaning up E2E database...
🧹 Cleaning up E2E database...
✅ E2E database cleaned up
🗑️ Cleaning up authentication state...
✅ E2E global teardown completed successfully

  10 passed (1.0m)
