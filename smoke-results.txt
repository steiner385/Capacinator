ğŸš€ Starting E2E global setup...
ğŸ—„ï¸ Initializing E2E database...
ğŸ§ª Initializing E2E test database...
ğŸ”§ Running E2E database migrations...
Creating baseline database schema...
âœ… Baseline database schema created successfully
Fixing primary role foreign key constraint...
âœ… Fixed primary role foreign key constraint
Creating missing database views...
âœ… Created missing database views
Adding person_utilization_view and project_demands_view...
âœ… Added person_utilization_view and project_demands_view
Fixing project_demands_view with correct join conditions...
âœ… Fixed project_demands_view with correct join conditions
Fixing database views...
âœ… Fixed database views
Adding project_health_view for gaps analysis...
âœ… Added project_health_view for gaps analysis
Fixing project_health_view with correct health_status column...
âœ… Fixed project_health_view with correct health_status column
Improving project_demands_view with hour calculations...
âœ… Improved project_demands_view with hour calculations and project type info
Fixing project_demands_view missing columns...
âœ… Fixed project_demands_view with missing phase_id and renamed estimated_hours to demand_hours
Creating project_phase_dependencies table...
âœ… Created project_phase_dependencies table with constraints and indexes
ğŸ”§ Fixing missing IDs in database records...
Found 0 assignments without IDs
Found 0 availability overrides without IDs
âœ… Fixed missing IDs
ğŸŒ± Seeding E2E test data...
ğŸŒ± Seeding E2E test data...
âœ… E2E test data seeded successfully
âœ… E2E database initialized successfully
âœ… Development server already running
â³ Waiting for application to be ready...
âœ… Application is ready
ğŸ” Verifying test data...
âœ… API health check passed
âœ… /api/roles: 13 items
âš ï¸ /api/profiles returned 404
ğŸ” Handling initial profile selection...
ğŸ“‹ Profile selection modal detected
ğŸ¯ Starting profile selection...
ğŸ“‚ Opening profile dropdown...
Found 14 profile options
Selecting profile: Alice Johnson (Project Manager)
âš ï¸ Profile selection handling failed: page.waitForFunction: Timeout 30000ms exceeded.
    at selectProfile (/home/tony/GitHub/Capacinator/tests/e2e/helpers/e2e-global-setup.ts:339:16)
    at handleInitialProfileSelection (/home/tony/GitHub/Capacinator/tests/e2e/helpers/e2e-global-setup.ts:288:7)
    at globalSetup (/home/tony/GitHub/Capacinator/tests/e2e/helpers/e2e-global-setup.ts:66:5) {
  name: 'TimeoutError'
}
ğŸ’¾ Authentication state saved to /home/tony/GitHub/Capacinator/test-results/e2e-auth.json
âœ… E2E global setup completed successfully

Running 10 tests using 4 workers

  âœ“   2 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:12:3 â€º Smoke Tests â€º @smoke @critical server health check (175ms)
âœ… Loaded saved authentication state
âœ… Loaded saved authentication state
âœ… Loaded saved authentication state
ğŸ” Checking for profile selection modal...
ğŸ” Checking for profile selection modal...
âœ… Loaded saved authentication state
ğŸ” Checking for profile selection modal...
ğŸ” Checking for profile selection modal...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ“ Profile select component found
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ¯ Attempting to select profile...
ğŸ¯ Attempting to select profile...
ğŸ¯ Attempting to select profile...
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
ğŸ“‚ Opened shadcn Select dropdown
ğŸ“‚ Opened shadcn Select dropdown
ğŸ“‚ Opened shadcn Select dropdown
Selecting profile: Alice Johnson (Project Manager)
Selecting profile: Alice Johnson (Project Manager)
Selecting profile: Alice Johnson (Project Manager)
âœ… Profile selected using shadcn Select
âœ… Profile selected using shadcn Select
âœ… Profile selected using shadcn Select
Selecting profile: Alice Johnson (Project Manager)
âœ… Profile selected using shadcn Select
â³ Waiting for Continue button to become enabled...
âœ… Continue button is now enabled
ğŸ‘† Clicking Continue button...
â³ Waiting for Continue button to become enabled...
âœ… Continue button is now enabled
ğŸ‘† Clicking Continue button...
âœ… Continue button clicked successfully
â³ Waiting for profile modal to close...
â³ Waiting for Continue button to become enabled...
âœ… Profile modal successfully closed
â³ Waiting for navigation to stabilize...
âœ… Continue button is now enabled
ğŸ‘† Clicking Continue button...
âœ… Continue button clicked successfully
â³ Waiting for profile modal to close...
âœ… Profile modal successfully closed
â³ Waiting for navigation to stabilize...
âœ… Continue button clicked successfully
â³ Waiting for profile modal to close...
âœ… Profile modal successfully closed
â³ Waiting for navigation to stabilize...
â³ Waiting for Continue button to become enabled...
âœ… Continue button is now enabled
ğŸ‘† Clicking Continue button...
âœ… Continue button clicked successfully
â³ Waiting for profile modal to close...
âœ… Profile modal successfully closed
â³ Waiting for navigation to stabilize...
âœ… Network activity settled
ğŸ‰ Profile selection process completed
âœ… Network activity settled
ğŸ‰ Profile selection process completed
âœ… Network activity settled
ğŸ‰ Profile selection process completed
âœ… Network activity settled
ğŸ‰ Profile selection process completed
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
Waiting for page content to load...
âœ… Main content area found
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
âœ… Found content: .chart-container
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
  âœ“   1 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:28:3 â€º Smoke Tests â€º @smoke main navigation links work (9.8s)
  âœ“   3 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:20:3 â€º Smoke Tests â€º @smoke @critical can authenticate and reach dashboard (9.9s)
âœ… Loaded saved authentication state
âœ… Loaded saved authentication state
ğŸ” Checking for profile selection modal...
ğŸ” Checking for profile selection modal...
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .report-tabs, button.tab
  âœ“   4 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:38:3 â€º Smoke Tests â€º @smoke projects page loads with table (10.5s)
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .report-tabs, button.tab
  âœ“   5 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:53:3 â€º Smoke Tests â€º @smoke people page loads with data (10.6s)
  âœ“   9 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:112:3 â€º Smoke Tests â€º @smoke API endpoints respond (40ms)
âœ… Loaded saved authentication state
ğŸ” Checking for profile selection modal...
âœ… Loaded saved authentication state
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ” Checking for profile selection modal...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ¯ Attempting to select profile...
ğŸ¯ Attempting to select profile...
ğŸ“‹ Profile modal detected, proceeding with selection...
ğŸ“ Profile select component found
ğŸ“‚ Opened shadcn Select dropdown
ğŸ“‚ Opened shadcn Select dropdown
Selecting profile: Alice Johnson (Project Manager)
âœ… Profile selected using shadcn Select
Selecting profile: Alice Johnson (Project Manager)
âœ… Profile selected using shadcn Select
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
ğŸ¯ Attempting to select profile...
ğŸ“‚ Opened shadcn Select dropdown
Selecting profile: Alice Johnson (Project Manager)
âœ… Profile selected using shadcn Select
â³ Waiting for Continue button to become enabled...
âœ… Continue button is now enabled
ğŸ‘† Clicking Continue button...
Selecting profile: Alice Johnson (Project Manager)
âœ… Continue button clicked successfully
â³ Waiting for profile modal to close...
âœ… Profile modal successfully closed
â³ Waiting for navigation to stabilize...
â³ Waiting for Continue button to become enabled...
âœ… Continue button is now enabled
ğŸ‘† Clicking Continue button...
âœ… Profile selected using shadcn Select
âœ… Continue button clicked successfully
â³ Waiting for profile modal to close...
âœ… Profile modal successfully closed
â³ Waiting for navigation to stabilize...
â³ Waiting for Continue button to become enabled...
âœ… Continue button is now enabled
ğŸ‘† Clicking Continue button...
âœ… Continue button clicked successfully
â³ Waiting for profile modal to close...
âœ… Profile modal successfully closed
â³ Waiting for navigation to stabilize...
â³ Waiting for Continue button to become enabled...
âœ… Continue button is now enabled
ğŸ‘† Clicking Continue button...
âœ… Continue button clicked successfully
â³ Waiting for profile modal to close...
âœ… Profile modal successfully closed
â³ Waiting for navigation to stabilize...
âœ… Network activity settled
ğŸ‰ Profile selection process completed
âœ… Network activity settled
ğŸ‰ Profile selection process completed
âœ… Network activity settled
ğŸ‰ Profile selection process completed
âœ… Network activity settled
ğŸ‰ Profile selection process completed
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: text=No data available
  âœ“   6 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:67:3 â€º Smoke Tests â€º @smoke assignments page is accessible (10.1s)
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Found content: .report-tabs, button.tab
âœ… Main content area found
âœ… Found content: .chart-container
  âœ“   7 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:80:3 â€º Smoke Tests â€º @smoke reports page shows tabs (10.2s)
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .chart-container
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .report-tabs, button.tab
  âœ“  10 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:140:3 â€º Smoke Tests â€º @smoke search functionality exists (11.2s)
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .report-tabs, button.tab
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: .report-tabs, button.tab
Waiting for page content to load...
âœ… Layout container found
âœ… Sidebar found
âœ… Navigation links found
âœ… Main content area found
âœ… Found content: text=No data available
  âœ“   8 [smoke] â€º tests/e2e/suites/smoke/smoke-tests.spec.ts:90:3 â€º Smoke Tests â€º @smoke no console errors on main pages (16.3s)
ğŸ§¹ Starting E2E global teardown...
ğŸ—‘ï¸ Cleaning up test data for run: e2e-1758218371806
âš ï¸ scenario assignments endpoint not available, skipping cleanup
ğŸ—„ï¸ Cleaning up E2E database...
ğŸ§¹ Cleaning up E2E database...
âœ… E2E database cleaned up
ğŸ—‘ï¸ Cleaning up authentication state...
âœ… E2E global teardown completed successfully

  10 passed (1.0m)
