ğŸš€ Starting E2E global setup...
ğŸ—„ï¸ Initializing E2E database...
ğŸ§ª Initializing E2E test database...
ğŸ”§ Running E2E database migrations...
Creating baseline database schema...
âœ… Baseline database schema created successfully
Fixing primary role foreign key constraint...
âœ… Fixed primary role foreign key constraint
Creating missing database views...
âœ… Created missing database views
Adding person_utilization_view and project_demands_view...
âœ… Added person_utilization_view and project_demands_view
Fixing project_demands_view with correct join conditions...
âœ… Fixed project_demands_view with correct join conditions
Fixing database views...
âœ… Fixed database views
Adding project_health_view for gaps analysis...
âœ… Added project_health_view for gaps analysis
Fixing project_health_view with correct health_status column...
âœ… Fixed project_health_view with correct health_status column
Improving project_demands_view with hour calculations...
âœ… Improved project_demands_view with hour calculations and project type info
Fixing project_demands_view missing columns...
âœ… Fixed project_demands_view with missing phase_id and renamed estimated_hours to demand_hours
Creating project_phase_dependencies table...
âœ… Created project_phase_dependencies table with constraints and indexes
ğŸ”§ Fixing missing IDs in database records...
Found 0 assignments without IDs
Found 0 availability overrides without IDs
âœ… Fixed missing IDs
ğŸŒ± Seeding E2E test data...
ğŸŒ± Seeding E2E test data...
âœ… E2E test data seeded successfully
âœ… E2E database initialized successfully
ğŸš€ Starting development server for E2E tests...
ğŸš€ Starting server...
âœ… Server started successfully
ğŸš€ Starting client...
âœ… Client started successfully
â³ Waiting for server at http://localhost:3120...
âœ… Server is ready
â³ Waiting for application to be ready...
âœ… Application is ready
ğŸ” Verifying test data...
âœ… API health check passed
âœ… /api/roles: 3 items
ğŸ” Handling initial profile selection...
ğŸ“‹ Profile selection modal detected
ğŸ¯ Starting profile selection...

ğŸ“ Attempt 1/3 to select profile...
Select trigger text: "Select your name..."
ğŸ“‚ Opening profile dropdown...
ğŸ” Trying strategy: Standard role="option"
âœ… Standard role="option": Found 3 options
DOM state: 0 portals, 1 popper wrappers
Available profiles: [
  'E2E Test User 1 (E2E Developer)',
  'E2E Test User 2 (E2E Designer)',
  'E2E Test Manager (E2E Manager)'
]
Selecting profile: "E2E Test User 1 (E2E Developer)"
Select value after click: "Select your name..."
ğŸ”„ Retrying...

ğŸ“ Attempt 2/3 to select profile...
Select trigger text: "Select your name..."
ğŸ“‚ Opening profile dropdown...
ğŸ” Trying strategy: Standard role="option"
âœ… Standard role="option": Found 3 options
DOM state: 0 portals, 1 popper wrappers
Available profiles: [
  'E2E Test User 1 (E2E Developer)',
  'E2E Test User 2 (E2E Designer)',
  'E2E Test Manager (E2E Manager)'
]
Selecting profile: "E2E Test User 1 (E2E Developer)"
Select value after click: "Select your name..."
ğŸ”„ Retrying...

ğŸ“ Attempt 3/3 to select profile...
Select trigger text: "Select your name..."
ğŸ“‚ Opening profile dropdown...
ğŸ” Trying strategy: Standard role="option"
âœ… Standard role="option": Found 3 options
DOM state: 0 portals, 0 popper wrappers
Available profiles: []
Selecting profile: "undefined"
ğŸ”Œ All UI attempts failed, trying API fallback...
ğŸ”Œ Using API fallback for profile selection...
API fallback: Selecting E2E Test User 1
âœ… Profile selected via API fallback
âœ… Profile selected and saved
ğŸ’¾ Current auth data: { hasCurrentUser: true, hasSelectedProfile: true }
ğŸ’¾ Authentication state saved to /home/tony/GitHub/Capacinator/test-results/e2e-auth.json
âœ… Saved state verification: Contains localStorage data
âœ… E2E global setup completed successfully
